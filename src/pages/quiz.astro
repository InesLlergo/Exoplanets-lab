---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Quiz de Exoplanetas">
  <style>
    /* --- Estilos Generales --- */
    .card {
      background: rgba(17,24,39,0.7);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 1.5rem;
      padding: 2rem 3rem;
      max-width: 650px;
      width: 90%;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .card h1 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
    }

    /* --- Estilos del Quiz --- */
    .card h2 { font-size: 1.25rem; margin: 1rem 0; min-height: 3rem; text-align: left; width: 100%;}
    .options { display:flex; flex-direction:column; align-items:flex-start; gap:.75rem; margin-bottom:1.5rem; width: 100%;}
    .options label { background:#1f2937; padding:.75rem 1rem; border-radius:.75rem; width:100%; color:#e5e7eb; cursor:pointer; transition: background 0.2s; text-align: left; box-sizing: border-box;}
    .options label:hover { background:#374151; }
    input[type="radio"] { margin-right:.75rem; accent-color:#6366f1; }
    .feedback { margin-top:1rem; padding:.75rem 1rem; border-radius:.75rem; display:none; color:#f9fafb; text-align:left; width: 100%; box-sizing: border-box;}
    .feedback.correct { background-color: rgba(5,150,105,0.7); }
    .feedback.wrong { background-color: rgba(220,38,38,0.7); }
    #score, #progress { color:#fff; margin-bottom:.5rem; }
    #fun-fact { color:#9ca3af; margin-top: 1.5rem; font-style: italic; min-height: 3rem; width: 100%;}

    .submit {
        background: linear-gradient(to right,#4f46e5,#6366f1);
        color:#fff; border:none; border-radius:.75rem; padding:.8rem 1.5rem;
        font-size:1rem; font-weight:600; cursor:pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow:0 4px 15px rgba(79,70,229,0.4);
        width: 100%;
    }
    .submit:hover { transform: scale(1.02); box-shadow:0 6px 20px rgba(79,70,229,0.5); }
    
    .back-btn {
        margin-top: 1rem;
        background: linear-gradient(to right, #16a34a, #22c55e);
        box-shadow:0 4px 15px rgba(22, 163, 74, 0.4);
        width: 100%;
        padding:.8rem 1.5rem;
        border-radius:.75rem;
        font-weight: 600;
        font-size: 1rem;
        color: white;
    }
    a.back-btn { text-decoration: none; display: inline-block; box-sizing: border-box;}
    .back-btn:hover {
        transform: scale(1.02);
        box-shadow:0 6px 20px rgba(22, 163, 74, 0.5);
    }
  </style>

  <section id="quiz">
    <main class="card">
      <h1>Quiz de Exoplanetas üåå</h1>
      <p id="score">Puntaje: 0</p>
      <p id="progress">Pregunta 1/9</p>
      <h2 id="question">Cargando pregunta...</h2>
      <div class="options" id="options"></div>
      <button class="submit">Responder</button>
      <div class="feedback" id="feedback"></div>
      <p id="fun-fact"></p>
      <a href="/" class="back-btn">Regresar al Men√∫</a>
    </main>
  </section>

  <script>
    const quiz = [
        { question: "¬øCu√°l de estos NO es una caracter√≠stica de un exoplaneta?",
            options: { a:"Orbitar una estrella distinta al Sol", b:"Formarse a partir de la misma nube interestelar que su estrella", c:"Encontrarse fuera del sistema solar", d:"Ser generalmente m√°s peque√±o que su estrella" },
            correct: "b", explanation:"¬°Correcto! Si bien se forman de nubes interestelares, no necesariamente es la misma que su estrella actual, ya que pueden ser capturados."
        },
        { question: "¬øCu√°l es el m√©todo de detecci√≥n que observa la disminuci√≥n del brillo de una estrella cuando un planeta pasa por delante?",
            options: { a:"Velocidad radial", b:"Tr√°nsito", c:"Microlente gravitacional", d:"Imagen directa" },
            correct: "b", explanation:"¬°Correcto! El m√©todo de tr√°nsito es el m√°s exitoso hasta la fecha para encontrar exoplanetas."
        },
        { question: "Un exoplaneta tipo 'J√∫piter caliente' se caracteriza por...",
            options: { a:"Ser rocoso y estar cerca de su estrella", b:"Ser un gigante gaseoso que orbita muy cerca de su estrella", c:"Tener agua l√≠quida en su superficie", d:"Orbitar una estrella muy fr√≠a" },
            correct: "b", explanation:"¬°Correcto! Son gigantes gaseosos con periodos orbitales muy cortos, a veces de solo unos pocos d√≠as."
        },
        { question: "La 'zona habitable' alrededor de una estrella es la regi√≥n donde...",
            options: { a:"Un planeta puede tener lunas", b:"La vida alien√≠gena est√° confirmada", c:"Un planeta podr√≠a tener agua l√≠quida en su superficie", d:"La radiaci√≥n estelar es m√≠nima" },
            correct: "c", explanation:"¬°Correcto! Es la zona orbital donde las temperaturas permiten la existencia de agua l√≠quida."
        },
        { question: "¬øQu√© es una 'Supertierra'?",
            options: { a:"Un planeta m√°s grande que la Tierra pero m√°s peque√±o que Neptuno", b:"Un planeta con continentes similares a la Tierra", c:"Una luna m√°s grande que la Tierra", d:"Un planeta que orbita dos estrellas" },
            correct: "a", explanation:"¬°Correcto! Son planetas con una masa mayor a la de la Tierra pero considerablemente menor que los gigantes de hielo del sistema solar."
        },
        { question: "¬øCu√°l fue el primer telescopio espacial dise√±ado espec√≠ficamente para buscar exoplanetas?",
            options: { a:"Hubble", b:"James Webb", c:"Spitzer", d:"Kepler" },
            correct: "d", explanation:"¬°Correcto! El Telescopio Espacial Kepler revolucion√≥ la b√∫squeda de exoplanetas, descubriendo miles de ellos."
        },
        { question: "El exoplaneta Proxima Centauri b es notable porque...",
            options: { a:"Es el m√°s grande jam√°s descubierto", b:"Es el exoplaneta conocido m√°s cercano a la Tierra", c:"Tiene anillos como Saturno", d:"Fue el primero en ser descubierto" },
            correct: "b", explanation:"¬°Correcto! Orbita Proxima Centauri, la estrella m√°s cercana a nuestro Sol, a unos 4.2 a√±os luz de distancia."
        },
        { question: "Si un exoplaneta es detectado por el m√©todo de 'velocidad radial', ¬øqu√© se est√° midiendo?",
            options: { a:"El cambio de color del planeta", b:"El peque√±o 'bamboleo' gravitacional que el planeta induce en su estrella", c:"La luz del planeta reflejada en su atm√≥sfera", d:"El tiempo que tarda el planeta en orbitar la estrella" },
            correct: "b", explanation:"¬°Correcto! Este m√©todo detecta cambios sutiles en el espectro de luz de la estrella causados por su bamboleo gravitacional."
        },
        { question: "Los 'planetas errantes' o 'vagabundos' son objetos que...",
            options: { a:"Orbitan su estrella en direcci√≥n contraria", b:"No orbitan ninguna estrella y vagan por la galaxia", c:"Cambian de √≥rbita constantemente", d:"Tienen atm√≥sferas muy densas" },
            correct: "b", explanation:"¬°Correcto! Son objetos de masa planetaria que han sido expulsados de sus sistemas y viajan solos por el espacio."
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    const pointsPerCorrect = 10;
    
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const submitButton = document.querySelector('.submit');
    const feedbackEl = document.getElementById('feedback');
    const progressEl = document.getElementById('progress');
    const scoreEl = document.getElementById('score');
    const funFactEl = document.getElementById('fun-fact');

    const funFacts = [
        "Se estima que hay m√°s planetas que estrellas en nuestra galaxia, la V√≠a L√°ctea.",
        "El exoplaneta 55 Cancri e podr√≠a estar compuesto en gran parte de diamante.",
        "Algunos exoplanetas orbitan p√∫lsares, los restos ultradensos de estrellas masivas que han explotado."
    ];
    let firstAttempt = true;

    function showFunFact() {
      funFactEl.textContent = "Dato curioso: " + funFacts[Math.floor(Math.random()*funFacts.length)];
    }

    function loadQuestion(index){
      const q = quiz[index];
      questionEl.textContent = q.question;
      optionsEl.innerHTML = '';
      for(let key in q.options){
        const label = document.createElement('label');
        label.innerHTML = `<input type="radio" name="quiz" value="${key}"> ${q.options[key]}`;
        optionsEl.appendChild(label);
      }
      feedbackEl.style.display = "none";
      feedbackEl.className = "feedback";
      progressEl.textContent = `Pregunta ${index + 1}/${quiz.length}`;
      submitButton.textContent = "Responder";
      firstAttempt = true;
      showFunFact();
      submitButton.style.display = '';
    }

    submitButton.addEventListener('click', ()=>{
      const q = quiz[currentQuestion];
      const selected = document.querySelector('input[name="quiz"]:checked');
      
      if(submitButton.textContent === "Siguiente Pregunta"){
        currentQuestion++;
        if(currentQuestion < quiz.length){
          loadQuestion(currentQuestion);
        } else {
          questionEl.textContent="üéâ ¬°Has completado el quiz!";
          optionsEl.innerHTML='';
          feedbackEl.style.display='none';
          submitButton.style.display='none';
          progressEl.textContent=`Puntaje Final: ${score} de ${quiz.length * pointsPerCorrect}`;
          funFactEl.textContent = "¬°Gracias por jugar! Sigue explorando el universo.";
        }
        return;
      }
      
      if(!selected){
        alert("Por favor, selecciona una respuesta.");
        return;
      }
      
      if(selected.value === q.correct){
        if(firstAttempt){
          score += pointsPerCorrect;
          scoreEl.textContent = `Puntaje: ${score}`;
        }
        feedbackEl.textContent = q.explanation;
        feedbackEl.className = "feedback correct";
      } else {
        feedbackEl.textContent = "Respuesta incorrecta. La respuesta correcta era: " + q.options[q.correct];
        feedbackEl.className = "feedback wrong";
      }
      
      feedbackEl.style.display = "block";
      firstAttempt = false;
      submitButton.textContent = "Siguiente Pregunta";
    });
    
    // Cargar la primera pregunta al iniciar la p√°gina
    loadQuestion(currentQuestion);
  </script>
</Layout>