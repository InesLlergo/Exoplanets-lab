---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Exoplanet Quiz">
    <style>
        /* --- Estilos Generales --- */
        .card {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 2rem 3rem;
            max-width: 650px;
            width: 90%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .card h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* --- Estilos del Quiz --- */
        .card h2 {
            font-size: 1.25rem;
            margin: 1rem 0;
            min-height: 3rem;
            text-align: left;
            width: 100%;
        }
        .options {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            width: 100%;
        }
        .options label {
            background: #1f2937;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            width: 100%;
            color: #e5e7eb;
            cursor: pointer;
            transition: background 0.2s;
            text-align: left;
            box-sizing: border-box;
        }
        .options label:hover {
            background: #374151;
        }
        input[type="radio"] {
            margin-right: 0.75rem;
            accent-color: #6366f1;
        }
        .feedback {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            display: none;
            color: #f9fafb;
            text-align: left;
            width: 100%;
            box-sizing: border-box;
        }
        .feedback.correct {
            background-color: rgba(5, 150, 105, 0.7);
        }
        .feedback.wrong {
            background-color: rgba(220, 38, 38, 0.7);
        }
        #score,
        #progress {
            color: #fff;
            margin-bottom: 0.5rem;
        }
        #fun-fact {
            color: #9ca3af;
            margin-top: 1.5rem;
            font-style: italic;
            min-height: 3rem;
            width: 100%;
        }

        .submit {
            background: linear-gradient(to right, #4f46e5, #6366f1);
            color: #fff;
            border: none;
            border-radius: 0.75rem;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition:
                transform 0.2s ease,
                box-shadow 0.2s ease;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
            width: 100%;
        }
        .submit:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.5);
        }

        .back-btn {
            margin-top: 1rem;
            background: linear-gradient(to right, #16a34a, #22c55e);
            box-shadow: 0 4px 15px rgba(22, 163, 74, 0.4);
            width: 100%;
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            color: white;
        }
        a.back-btn {
            text-decoration: none;
            display: inline-block;
            box-sizing: border-box;
        }
        .back-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(22, 163, 74, 0.5);
        }
    </style>

    <section id="quiz">
        <main class="card">
            <h1>Exoplanet Quiz ðŸŒŒ</h1>
            <p id="score">Score: 0</p>
            <p id="progress">Question 1/9</p>
            <h2 id="question">Loading question...</h2>
            <div class="options" id="options"></div>
            <button class="submit">Answer</button>
            <div class="feedback" id="feedback"></div>
            <p id="fun-fact"></p>
            <a href="/" class="back-btn">Back to Menu</a>
        </main>
    </section>

    <script>
        const quiz = [
            {
                question:
                    "Which of these is NOT a characteristic of an exoplanet?",
                options: {
                    a: "Orbiting a star other than the Sun",
                    b: "Forming from the same interstellar cloud as its star",
                    c: "Being outside the solar system",
                    d: "Being generally smaller than its star",
                },
                correct: "b",
                explanation:
                    "Correct! While they form from interstellar clouds, it is not necessarily the same as their current star, as they can be captured.",
            },
            {
                question:
                    "What is the detection method that observes the decrease in a star's brightness when a planet passes in front of it?",
                options: {
                    a: "Radial velocity",
                    b: "Transit",
                    c: "Gravitational microlensing",
                    d: "Direct imaging",
                },
                correct: "b",
                explanation:
                    "Correct! The transit method is the most successful to date for finding exoplanets.",
            },
            {
                question:
                    "A 'Hot Jupiter' type exoplanet is characterized by...",
                options: {
                    a: "Being rocky and close to its star",
                    b: "Being a gas giant that orbits very close to its star",
                    c: "Having liquid water on its surface",
                    d: "Orbiting a very cold star",
                },
                correct: "b",
                explanation:
                    "Correct! They are gas giants with very short orbital periods, sometimes only a few days.",
            },
            {
                question:
                    "The 'habitable zone' around a star is the region where...",
                options: {
                    a: "A planet can have moons",
                    b: "Alien life is confirmed",
                    c: "A planet could have liquid water on its surface",
                    d: "Stellar radiation is minimal",
                },
                correct: "c",
                explanation:
                    "Correct! It is the orbital zone where temperatures allow the existence of liquid water.",
            },
            {
                question: "What is a 'Super-Earth'?",
                options: {
                    a: "A planet larger than Earth but smaller than Neptune",
                    b: "A planet with continents similar to Earth",
                    c: "A moon larger than Earth",
                    d: "A planet orbiting two stars",
                },
                correct: "a",
                explanation:
                    "Correct! They are planets with a mass greater than Earth's but considerably less than the ice giants of the solar system.",
            },
            {
                question:
                    "What was the first space telescope designed specifically to search for exoplanets?",
                options: {
                    a: "Hubble",
                    b: "James Webb",
                    c: "Spitzer",
                    d: "Kepler",
                },
                correct: "d",
                explanation:
                    "Correct! The Kepler Space Telescope revolutionized the search for exoplanets, discovering thousands of them.",
            },
            {
                question:
                    "The exoplanet Proxima Centauri b is notable because...",
                options: {
                    a: "It is the largest ever discovered",
                    b: "It is the closest known exoplanet to Earth",
                    c: "It has rings like Saturn",
                    d: "It was the first to be discovered",
                },
                correct: "b",
                explanation:
                    "Correct! It orbits Proxima Centauri, the closest star to our Sun, about 4.2 light-years away.",
            },
            {
                question:
                    "If an exoplanet is detected by the 'radial velocity' method, what is being measured?",
                options: {
                    a: "The change in the planet's color",
                    b: "The small gravitational 'wobble' that the planet induces in its star",
                    c: "The light from the planet reflected in its atmosphere",
                    d: "The time it takes for the planet to orbit the star",
                },
                correct: "b",
                explanation:
                    "Correct! This method detects subtle changes in the star's light spectrum caused by its gravitational wobble.",
            },
            {
                question:
                    "'Rogue planets' or 'wanderers' are objects that...",
                options: {
                    a: "Orbit their star in the opposite direction",
                    b: "Do not orbit any star and wander through the galaxy",
                    c: "Constantly change orbit",
                    d: "Have very dense atmospheres",
                },
                correct: "b",
                explanation:
                    "Correct! They are planetary-mass objects that have been ejected from their systems and travel alone through space.",
            },
        ];

        let currentQuestion = 0;
        let score = 0;
        const pointsPerCorrect = 10;

        const questionEl = document.getElementById("question");
        const optionsEl = document.getElementById("options");
        const submitButton = document.querySelector(".submit");
        const feedbackEl = document.getElementById("feedback");
        const progressEl = document.getElementById("progress");
        const scoreEl = document.getElementById("score");
        const funFactEl = document.getElementById("fun-fact");

        const funFacts = [
            "It is estimated that there are more planets than stars in our galaxy, the Milky Way.",
            "The exoplanet 55 Cancri e could be largely composed of diamond.",
            "Some exoplanets orbit pulsars, the ultra-dense remnants of massive stars that have exploded.",
        ];
        let firstAttempt = true;

        function showFunFact() {
            funFactEl.textContent =
                "Fun fact: " +
                funFacts[Math.floor(Math.random() * funFacts.length)];
        }

        function loadQuestion(index) {
            const q = quiz[index];
            questionEl.textContent = q.question;
            optionsEl.innerHTML = "";
            for (let key in q.options) {
                const label = document.createElement("label");
                label.innerHTML = `<input type="radio" name="quiz" value="${key}"> ${q.options[key]}`;
                optionsEl.appendChild(label);
            }
            feedbackEl.style.display = "none";
            feedbackEl.className = "feedback";
            progressEl.textContent = `Question ${index + 1}/${quiz.length}`;
            submitButton.textContent = "Answer";
            firstAttempt = true;
            showFunFact();
            submitButton.style.display = "";
        }

        submitButton.addEventListener("click", () => {
            const q = quiz[currentQuestion];
            const selected = document.querySelector(
                'input[name="quiz"]:checked',
            );

            if (submitButton.textContent === "Next Question") {
                currentQuestion++;
                if (currentQuestion < quiz.length) {
                    loadQuestion(currentQuestion);
                } else {
                    questionEl.textContent =
                        "ðŸŽ‰ You have completed the quiz!";
                    optionsEl.innerHTML = "";
                    feedbackEl.style.display = "none";
                    submitButton.style.display = "none";
                    progressEl.textContent = `Final Score: ${score} of ${quiz.length * pointsPerCorrect}`;
                    funFactEl.textContent =
                        "Thanks for playing! Keep exploring the universe.";
                }
                return;
            }

            if (!selected) {
                alert("Please, select an answer.");
                return;
            }

            if (selected.value === q.correct) {
                if (firstAttempt) {
                    score += pointsPerCorrect;
                    scoreEl.textContent = `Score: ${score}`;
                }
                feedbackEl.textContent = q.explanation;
                feedbackEl.className = "feedback correct";
            } else {
                feedbackEl.textContent =
                    "Incorrect answer. The correct answer was: " +
                    q.options[q.correct];
                feedbackEl.className = "feedback wrong";
            }

            feedbackEl.style.display = "block";
            firstAttempt = false;
            submitButton.textContent = "Next Question";
        });

        // Cargar la primera pregunta al iniciar la pÃ¡gina
        loadQuestion(currentQuestion);
    </script>
</Layout>
